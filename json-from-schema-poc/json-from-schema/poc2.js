var jfs = require('json-from-schema');

console.log('Loading JSON Message from Schema . . .');

var schema1Str = "    \"$schema\": \"http://json-schema.org/draft-04/schema#\",    \"id\": \"UpdateCustomerBI-1.0.0.spec#\",    \"title\": \"UpdateCustomerBI-1.0.0\",    \"description\": \"This Business Interaction represents a request to update a customer.\",    \"allOf\": [        {            \"$ref\": \"BusinessInteraction.json#\"        },        {            \"properties\": {                \"interactionType\": {                    \"type\": \"string\",                    \"enum\": [                        \"Request\"                    ]                },                \"biSpecificationRef\": {                    \"type\": \"string\",                    \"format\": \"uri\",                    \"description\": \"Reference to the specification(schema) on whichthis Business Interaction instance is based on. It must be expressed as URI.\",                    \"enum\": [                       \"/cpi/schemas/UpdateCustomerBI-1.0.0.spec\"                    ]                },                \"biItems\": {                    \"type\": \"array\",                    \"minItems\": 1,                    \"maxItems\": 1,                    \"description\": \"The array of Customer Business InteractionItemfor this Customer Update\",                    \"items\": {                        \"$ref\": \"UpdateCustomerBIItem-1.0.0.spec#\"                    }                },                \"relatedPartyInteractionRoles\": {                    \"type\": \"array\",                    \"uniqueItems\": true,                    \"minItems\": 1,                    \"maxItems\": 1,                    \"description\": \"An array of Party Interaction Roles whichassociates a single Customer with this Update Customer Business Interaction.\",                    \"items\": {                        \"$ref\":\"#/definitions/CustomerInteractionRole\"                    }                }            },            \"required\": [               \"relatedPartyInteractionRoles\",                \"biItems\"            ]        }    ],    \"definitions\": {        \"CustomerInteractionRole\": {           \"allOf\": [                {                    \"$ref\": \"EntityAssociation.json#\"                },                {                    \"properties\": {                        \"entitySpecificationRef\": {                            \"type\": \"string\",                            \"format\": \"uri\",                            \"description\": \"Reference to the specification(schema) describing the entity referred to by entityRef. It must be expressedas URI.\",                            \"enum\": [                                \"/cpi/schemas/Customer.json\"                            ]                        }                    },                    \"entityRef\":{                        \"type\": \"string\",                        \"format\":\"uri\",                        \"description\": \"Reference to the entity related to the given entity.\",                        \"pattern\":\"(\/cpi\/holisticView\/v\\d+\/customer\/)(\\w+)\"                    }                }            ]        }    }";
 
var schema1 = JSON.parse(schema1Str); 
 
var schema2Str = "    \"$schema\": \"http://json-schema.org/draft-04/schema#\",    \"id\": \"UpdateCustomerBIItem-1.0.0.spec#\",    \"title\":\"UpdateCustomerBIItem-1.0.0\",    \"description\": \"A type of Business Interaction Item that represents values to be updated in a Customer.\",    \"allOf\": [        {            \"$ref\": \"BusinessInteractionItem.json#\"        },        {            \"properties\": {                \"biItemSpecificationRef\": {                    \"type\": \"string\",                    \"format\": \"uri\",                    \"description\": \"Reference to the specification(schema) on whichthis Business Interaction Item instance is based on. It must be expressed as URI.\",                    \"enum\": [                       \"/cpi/schemas/UpdateCustomerBIItem-1.0.0.spec\"                    ]                },                \"action\": {                    \"type\": \"string\",                    \"description\": \"Specifies the action to be performed on the Involved Entity. Examples: Add, Modify, Delete, Inquiry.\",                    \"enum\": [                        \"Update\"                    ]                },                \"involvedEntity\": {                    \"type\": \"object\",                    \"additionalProperties\": false,                    \"description\": \"This object represents theInvolvedBusiness Entity.\",                    \"properties\": {                        \"entitySpecificationRef\": {                            \"type\": \"string\",                            \"format\": \"uri\",                            \"description\": \"Reference to the specification(schema) describing the Entitycontained here as the property named entity. It must be expressed as URI.\",                            \"enum\": [                               \"#/definitions/CustomerUpdateInformation\"                            ]                        },                        \"entity\": {                           \"$ref\": \"#/definitions/CustomerUpdateInformation\"                        }                    }                }            },            \"required\": [                \"involvedEntity\"            ]        }    ],    \"definitions\": {        \"CustomerUpdateInformation\": {            \"type\": \"object\",            \"additionalProperties\": false,            \"properties\": {                \"homeTimeZones\": {                    \"type\": \"array\",                    \"uniqueItems\": true,                    \"description\": \"An array of applicable Time Zones for this Customer.\",                   \"items\": {                        \"$ref\": \"TimeZoneValue.json#\"                    }                }            },            \"minProperties\": 1        }    }";
 
var schema2 = JSON.parse(schema2Str); 
 
var gen = new jfs.JsonFromSchema([schema1, schema2])
var sampleDerp = gen.generate('UpdateCustomerBI-1.0.0.spec'); // note: no hash at the end 
console.log(sampleDerp); 
var sampleHerp = gen.generate('UpdateCustomerBIItem-1.0.0.spec');
console.log(sampleHerp); 